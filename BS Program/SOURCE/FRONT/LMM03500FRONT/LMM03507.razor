@inherits R_Page
@using LMM03500COMMON.DTOs.LMM03500
@using LMM03500COMMON.DTOs.LMM03507
@using LMM03500COMMON.DTOs;
@using LMM03500MODEL
@using LMM03500MODEL.ViewModel;
<R_StackLayout>
    <R_StackLayout Class="mb-2">
        <R_StackLayout Row>
            <R_ItemLayout col="1">
                <R_Label Class="fw-bold" FontSize="15">@_localizer["_Tenant"]</R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="@loMembersViewModel.loTenant.CTENANT_ID"
                           R_ConductorSource="@_conductorMembersRef"
                           Enabled="false">
                </R_TextBox>
            </R_ItemLayout>
            <R_ItemLayout col="8">
                <R_TextBox @bind-Value="@loMembersViewModel.loTenant.CTENANT_NAME"
                           R_ConductorSource="@_conductorMembersRef"
                           Enabled="false">
                </R_TextBox>
            </R_ItemLayout>
        </R_StackLayout>
    </R_StackLayout>

    @* Lay-Out Table Grid List *@
    <R_StackLayout Spacing="3" Class="mb-4" Row="true">
        <R_ItemLayout col="12">
            <R_Grid @ref="@_gridMembersRef"
                    DataSource="@loMembersViewModel.loMembersList"
                    R_ConductorSource="@_conductorMembersRef"
                    R_GridType="@R_eGridType.Navigator"
                    Height="150px"
                    R_ServiceGetListRecord="@Grid_R_ServiceGetMembersListRecord">
                <R_GridColumns>
                    <R_GridTextColumn FieldName="@nameof(LMM03507DTO.CMEMBER_SEQ_NO)" HeaderText="@_localizer["_SequenceNo"]" Width="150px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName="@nameof(LMM03507DTO.CMEMBER_NAME)" HeaderText="@_localizer["_FullName"]" Width="250px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName="@nameof(LMM03507DTO.CGENDER_NAME)" HeaderText="@_localizer["_Gender"]" Width="100px"></R_GridTextColumn>
                    <R_GridDatePickerColumn FieldName="@nameof(LMM03507DTO.DDATE_BIRTH)" HeaderText="@_localizer["_Birthdays"]" Width="150px"></R_GridDatePickerColumn>
                    <R_GridTextColumn FieldName="@nameof(LMM03507DTO.CRELATIONSHIP)" HeaderText="@_localizer["_Relationship"]" Width="150px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName="@nameof(LMM03507DTO.CMOBILE_PHONE1)" HeaderText="@_localizer["_MobileNo(1)"]" Width="150px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName="@nameof(LMM03507DTO.CEMAIL)" HeaderText="@_localizer["_Email"]" Width="250px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName="@nameof(LMM03507DTO.CUPDATE_BY)" HeaderText="@_localizer["_UpdatedBy"]" Width="150px"></R_GridTextColumn>
                    <R_GridDateTimePickerColumn FieldName="@nameof(LMM03507DTO.DUPDATE_DATE)" HeaderText="@_localizer["_UpdatedDate"]" Width="200px"></R_GridDateTimePickerColumn>
                    <R_GridTextColumn FieldName="@nameof(LMM03507DTO.CCREATE_BY)" HeaderText="@_localizer["_CreatedBy"]" Width="150px"></R_GridTextColumn>
                    <R_GridDateTimePickerColumn FieldName="@nameof(LMM03507DTO.DCREATE_DATE)" HeaderText="@_localizer["_CreatedDate"]" Width="200px"></R_GridDateTimePickerColumn>
                </R_GridColumns>
            </R_Grid>
        </R_ItemLayout>
    </R_StackLayout>

    <R_StackLayout Row>
        <R_ItemLayout col="8">
            <R_StackLayout Row="true">
                <R_ItemLayout col="2">
                    <R_Label>@_localizer["_SequenceNo"]</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="@loMembersViewModel.Data.CMEMBER_SEQ_NO"
                               R_ConductorSource="@_conductorMembersRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row="true">
                <R_ItemLayout col="2">
                    <R_Label>@_localizer["_FullName"]*</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="9">
                    <R_TextBox @bind-Value="@loMembersViewModel.Data.CMEMBER_NAME"
                               @ref="_membersNameRef"
                               R_ConductorSource="@_conductorMembersRef"
                               MaxLength="100"
                               R_EnableAdd="true"
                               R_EnableEdit="true">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row="true">
                <R_ItemLayout col="2">
                    <R_Label>@_localizer["_BirthDate"]*</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="3">
                    <R_DateTimePicker Value="@BirthDateTemp"
                                      R_ConductorSource="@_conductorMembersRef"
                                      R_EnableAdd="true"
                                      R_EnableEdit="true" ValueChanged="@((DateTime value) => OnBirthDateValueChanged(value))">
                    </R_DateTimePicker>
                </R_ItemLayout>
                <R_ItemLayout col="1">
                </R_ItemLayout>
                <R_ItemLayout col="1">
                    <R_Label>@_localizer["_Age"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="1">
                    <R_NumericTextBox @bind-Value="@loMembersViewModel.Data.IAGE"
                                      R_ConductorSource="@_conductorMembersRef"
                                      Arrows="false"
                                      Enabled="false">
                    </R_NumericTextBox>
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row="true">
                <R_ItemLayout col="2">
                    <R_Label>@_localizer["_Relationship"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="9">
                    <R_TextBox @bind-Value="@loMembersViewModel.Data.CRELATIONSHIP"
                               R_ConductorSource="@_conductorMembersRef"
                               MaxLength="30"
                               R_EnableAdd="true"
                               R_EnableEdit="true">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>


            <R_StackLayout Row="true">
                <R_ItemLayout col="2">
                    <R_Label>@_localizer["_IDType"]*</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="3">
                    <R_ComboBox @bind-Value="loMembersViewModel.Data.CID_TYPE"
                                Data="loMembersViewModel.loIdTypeList"
                                R_ConductorSource="@_conductorMembersRef"
                                R_EnableAdd
                                R_EnableEdit
                                ValueField="@nameof(GetIdTypeDTO.CCODE)"
                                TextField="@nameof(GetIdTypeDTO.CDESCRIPTION)"></R_ComboBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="1"></R_ItemLayout>
                    <R_ItemLayout col="1">
                    <R_Label>@_localizer["_IDNo"]*</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                    <R_TextBox @bind-Value="@loMembersViewModel.Data.CID_NO"
                               R_ConductorSource="@_conductorMembersRef"
                               MaxLength="40"
                               R_EnableAdd="true"
                               R_EnableEdit="true">
                    </R_TextBox>
                    </R_ItemLayout>
                    </R_StackLayout>


                    <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                    <R_Label>@_localizer["_Nationality"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="9">
                    <R_TextBox @bind-Value="@loMembersViewModel.Data.CNATIONALITY"
                               R_ConductorSource="@_conductorMembersRef"
                               MaxLength="20"
                               R_EnableAdd="true"
                               R_EnableEdit="true">
                    </R_TextBox>
                    </R_ItemLayout>
                    </R_StackLayout>
        </R_ItemLayout>
        <R_ItemLayout col="4">
            <R_StackLayout Row="true">
                <R_ItemLayout col="4">
                    <R_Label>@_localizer["_Gender"]*</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="8">
                    <R_RadioGroup Data="@loGenderList"
                                  @bind-Value="loMembersViewModel.Data.CGENDER"
                                  ValueField="@nameof(Gender.GenderId)"
                                  TextField="@nameof(Gender.GenderName)"
                                  R_ConductorSource="@_conductorMembersRef"
                                  R_EnableAdd="true" R_EnableEdit="true">
                    </R_RadioGroup>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="4">
                    <R_Label>@_localizer["_MobileNo(2)"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="8">
                    <R_TextBox @bind-Value="@loMembersViewModel.Data.CMOBILE_PHONE1"
                               R_ConductorSource="@_conductorMembersRef"
                               MaxLength="30"
                               R_EnableAdd="true"
                               R_EnableEdit="true">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="4">
                    <R_Label>@_localizer["_MobileNo(2)"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="8">
                    <R_TextBox @bind-Value="@loMembersViewModel.Data.CMOBILE_PHONE2"
                               R_ConductorSource="@_conductorMembersRef"
                               MaxLength="30"
                               R_EnableAdd="true"
                               R_EnableEdit="true">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="4">
                    <R_Label>@_localizer["_Email"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="8">
                    <R_TextBox @bind-Value="@loMembersViewModel.Data.CEMAIL"
                               R_ConductorSource="@_conductorMembersRef"
                               MaxLength="100"
                               R_EnableAdd="true"
                               R_EnableEdit="true">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>
    </R_StackLayout>
            
    <R_StackLayout Row Class="justify-content-between">
        <R_ItemLayout>
            <R_AddButton R_Conductor="@_conductorMembersRef"></R_AddButton>
            <R_EditButton R_Conductor="@_conductorMembersRef"></R_EditButton>
            <R_DeleteButton R_Conductor="@_conductorMembersRef"></R_DeleteButton>

        </R_ItemLayout>
        <R_ItemLayout>
            <R_CancelButton R_Conductor="@_conductorMembersRef"></R_CancelButton>
            <R_SaveButton R_Conductor="@_conductorMembersRef"></R_SaveButton>
        </R_ItemLayout>
    </R_StackLayout>
</R_StackLayout>

<R_Conductor @ref="@_conductorMembersRef"
             R_ViewModel="@loMembersViewModel"
             R_Display="Grid_DisplayMembers"
             R_Saving="Grid_MembersValidation"
             R_AfterAdd="Grid_AfterAddMembers"
             R_SetOther="@Members_SetOther"
             R_ServiceSave="@Grid_ServiceSaveMembers"
             R_ServiceDelete="@Grid_ServiceDeleteMembers"
             R_IsHeader="true"
             R_ConvertToGridEntity="@R_ConvertToGridMembersEntity"
             R_ServiceGetRecord="@Grid_ServiceGetMembersRecord">
</R_Conductor>


